# Legacy Insights Dashboard

## Objective

Give developers rapid visibility into the riskiest modules of a multi-module Maven project so they can focus refactoring and debugging effort where legacy debt is highest.

## Overview

The Legacy Insights dashboard would appear as a dedicated pane in LazyMVN, summarizing structural and historical signals for each module:

- **Complexity hints**: module depth in the reactor, dependency fan-in/out, packaging type, and oversized POMs.
- **Static indicators**: counts of source files and classes, optional plugin outputs (SpotBugs, PMD, Checkstyle) when available.
- **Runtime friction**: goal duration statistics, failure frequency, and reliance on flags like `--also-make` recorded in LazyMVN history.

Developers see the “hot spots” immediately after selecting a project, making it clear where to apply tests, cleanups, or architectural splits.

## Technical Sketch

1. **Data sources**
   - Reuse existing effective-POM parsing to build a module graph.
   - Read cached build artifacts (e.g., `target/classes`) for simple metrics (counts, file sizes).
   - Tap LazyMVN’s command history to compute per-module failure rates and goal durations.
   - Optionally parse reports generated by common static analysis plugins when the files exist.

2. **Aggregation pipeline**
   - Populate a `LegacyInsight` struct per module (metrics + derived badges).
   - Cache results in `~/.config/lazymvn/insights/<project-hash>.json` with timestamps to avoid expensive recalculation.
   - Expose an API under `src/utils/` for retrieving and refreshing the cached insights.

3. **TUI integration**
   - Add a `Legacy` tab or pane displaying a sortable list of modules with badges such as “High fan-in,” “Flaky,” or “Large POM.”
   - Provide quick actions (keys) to jump from a module entry to relevant commands (e.g., run tests, open config).
   - Show contextual details in the footer (e.g., “Module has 12 dependents, SpotBugs warnings: 5”).

4. **Developer workflow**
   - On launch, LazyMVN computes or loads the insights cache.
   - Developers consult the dashboard before running commands, prioritize troublesome modules, and optionally pin modules to watch.
   - Subsequent runs update the cache incrementally, keeping stats fresh without slowing the UI.

## Benefits

- **Targets legacy debt** by surfacing the most fragile modules first.
- **Accelerates onboarding**: newcomers quickly learn where the complexity lives.
- **Improves planning**: teams can agree on refactoring priorities backed by objective data.
- **Stays non-invasive**: no repository changes; all generated files remain under LazyMVN’s config directory.

## Future Enhancements

- Export insights as Markdown/JSON for sharing in retrospectives.
- Add trend graphs to show whether a module’s health is improving release to release.
- Allow custom badge rules in `lazymvn.toml` so teams can define what constitutes “legacy” in their context.
- **Error telemetry**: monitor the output pane in near real time, count stack traces and error keywords per package, and surface a “noisiest packages” breakdown so developers can see which layers are failing most often.
